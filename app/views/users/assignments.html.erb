<% title "My Assignments" %>
<% description "A list of my math assignments aligned with the Common Core State Standard" %>
<% noindex %>
<% nofollow %>

<h1> My Assignments </h1>
<% if @assignments.any? %>
	<div class="margin-bottom">
		<table class="table-ccss">
			<tr>
				<th rowspan= "2"> </th>
				<th rowspan= "2"> Standard </th>
				<th rowspan= "2"> Assignment </th>
				<th rowspan= "2"> Instruction </th>
				<th colspan= "2"> Date </th>
				<th colspan= "3"> # of Students </th>
			</tr>
			<tr>
				<th> Start </th>
				<th> End </th>
				<th> Assigned </th>
				<th> Completed </th>
				<th> Graded </th>
			</tr>
			<% @assignments.each do |a| %>
				<tr>
					<td class="center">
						<%= link_to "Edit", edit_assignment_path(a), class: "btn btn-small btn-primary" %>
					</td>
					<td class="center">
						<%= a.standard.short %>
					</td>
					<td>
						<% if !a.assigned_post_id.nil? %>
							Solve problem #<%= link_to a.assigned_post_id, post_comments_path(a.assigned_post_id) %>
						<% else %>
							Create a new post
						<% end %>
					</td>
					<td>
						<%= a.instruction.html_safe %>
					</td>
					<td>
						<%= a.start_date %>
					</td>
					<td>
						<%= a.end_date %>
					</td>
					<td class="center">
						<%= link_to a.responses.count, assignment_path(a) %>
					</td>
					<td class="center">
						<%= link_to a.responses.where(completed: true).count, assignment_path(a) %>
					</td>
					<td class="center">
						<%= link_to a.responses.where(graded: true).count, assignment_path(a) %>
					</td>
				</tr>
			<% end %>
			<%= will_paginate @assignments %>
		</table>
	</div>
<% else %>
	<p>
		You have not assigned any homework to your students yet. <%= link_to "Create a new assignment", new_assignment_path %> now.
	</p>
<% end %>
<div class="center">
	<%= link_to "New assignment", new_assignment_path, class: "btn btn-large btn-success" %>
	<%= link_to "Past-due assignment", past_due_assignments_user_path(current_user), class: "btn btn-large btn-primary" %>
	<%= link_to "All grades", grading_results_user_path(current_user), class: "btn btn-large btn-primary" %>
</div>