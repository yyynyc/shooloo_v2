<% title "Assignment Details" %>
<% description "Assignment details" %>
<% noindex %>
<% nofollow %>

<h1> Teacher Dashboard </h1>

<% if @past_due_homeworks.any? || @ungraded_homeworks.any? %>
	<div class="well well-small margin-bottom">
		<% if @past_due_homeworks.any? %>
			<p class="alert-heading">
				<strong><%= link_to "Homework", assignments_user_path(current_user) %> Past Due: <%= @past_due_homeworks.count %></strong> 
				from 
				<% @past_due_students.each do |student| %>
					<%= link_to student.full_name_us, posts_user_path(student) %> |
				<% end %>
			</p>
		<% end %>
		<% if @ungraded_homeworks.any? %>
			<p class="alert-heading">
				<strong><%= link_to "Homework", assignments_user_path(current_user) %> Waiting to Be Graded: <%= @ungraded_homeworks.count %></strong> 
				{<% @ungraded_homeworks.each do |h| %>
					<% if h.posts.any? %>
						<% h.posts.each do |p| %>
							Post #<%= link_to p.id, new_post_grading_path(p) %>
						<% end %>
					<% else %>
						<% h.comments.each do |c| %>
							Comment #<%= link_to c.id, new_comment_grading_path(c) %>
						<% end %>
					<% end %>
				<% end %>}
			</p>
		<% end %>
	</div>
<% end %>

<% if @past_homeworks.any? %>
	<div class="row">	
		<h2>Grading Results of the Recent Homework Assignments</h2>
		<% @past_homeworks.each do |h| %>
			<div class="span4 offset1 search-label">
				<div class="chart-standard">
					CCSS Standard: <%= link_to h.standard.short %>
				</div>
				<a href="/assignments/<%=h.id%>"><%= render partial: 'shared/chart_grading', locals: {grade: h.colors} %></a>
			</div>
		<% end %>
	</div>
<% end %>


